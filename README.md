# Веб-сервис для дистанционного управления колёсными платформами

Данный веб сервис позволяет управлять n-ым количиством колёсных платформ,
посредствам веб интерфейса.

## Инфологическая модель

![Изображение инфологической модели](model.jpg "Инфологическая модель")

После регистрации в сервисе, пошивки колёсной платформы и
подключения её к wi-fi, она посылает через MQTT Broker на сервер запрос на
подключение, содержащий уникальный идентификатор пользователя, после чего
сервер аналогично отсылает ответ на запрос - `0/1`, `1` - подключение
одобрено, `0` - подключение отклонено. Подробнее про протокол можно
посмотреть в файле `robot_command_sets.md`.

После этого серевер через web-socket соеденение принемает данные из браузера, после чего, через MQTT Broker, отсылает их на соответствующие
колёсные платформы.

## Установка

Перед установкой веб-сервиса тербуется установитт MQTT Broker или
воспользоваться публичным. После его установки/выбора надо указать его
ip-аддрес и порт в файле конфига(config.json). В нём также нужно указать
ip-адрес/домен сервера и порт на котором будет работать веб-сервис, а
также email, с которого пользователям будут приходить письма с
подтверждением регистрации, и пароль от него.

После этого нужно установить Node.js (`https://nodejs.org`).

Скопировать код из репозитория и установить зависимости.

```bash
    git clone https://github.com/kalugin-stepan/controller
    cd controller
    npm i
```

## Управление веб-сервисом

### Запуск

```bash
    pm2 start ./dist/index.js
```

### Остановка

```bash
    pm2 stop index
```

### Перезапуск

```bash
    pm2 restart index
```
